Arcessium OA Question üî•üî• Hard
Topic: Challenge


Problem Statement: You are a data scientist at a financial analytics company that provides investment insights based on portfolio fluctuations. Each portfolio contains a number of asset values recorded in an array, and investors are interested in understanding the overall range volatility across different investment combinations.
One useful metric is the "width" of a sequence, defined as the difference between the maximum and minimum values in a subset of asset values. In this context, a subsequence refers to any selection of asset values that retains their original order, but may skip some elements.
You are given an array nums, where nums[i] represents the value of the i-th asset in a portfolio. Your task is to calculate the sum of the widths of all possible non-empty subsequences that can be formed from nums. Because the total number of subsequences grows exponentially, the final result can be extremely large. Therefore, you must return the sum modulo 10‚Åπ + 7.
A subsequence of an array is formed by deleting zero or more elements without changing the order of the remaining elements.
The width of a subsequence is the difference between its maximum and minimum values.
If nums = [2, 1, 3], the non-empty subsequences are:
[2], [1], [3] ‚Üí width = 0
[2,1], [2,3], [1,3] ‚Üí widths = 1, 1, 2
[2,1,3] ‚Üí width = 2
Total width sum = 0 + 1 + 1 + 2 + 2 = 6
Write an efficient program that takes nums and returns the sum of widths of all non-empty subsequences modulo 10‚Åπ + 7. Explain your approach, especially how you optimize for large input sizes and avoid recomputing subsequences.

Constraints:
1 <= nums.length <= 10^5
1 <= nums[i] <= 10^5


Example 1:
Input: nums = [2,1,3]
Output: 6
Explanation: The subsequences are [1], [2], [3], [2,1], [2,3], [1,3], [2,1,3].
The corresponding widths are 0, 0, 0, 1, 1, 2, 2.
The sum of these widths is 6.

Example 2:
Input: nums = [2]
Output: 0
 
Input0:
2 1 3 4 7
Output0:
102
Input1:
2 1 
Output1:
1
Input2:
2 5 6 7 9
Output2:
117
Input3:
5
Output3:
0
Input4:
5 1 5 6 7
Output4:
96
Input5:
5 1 5
Output5:
12
